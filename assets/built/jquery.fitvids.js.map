{"version":3,"file":"jquery.fitvids.js","sources":["jquery.fitvids.js"],"sourcesContent":["/* eslint-disable max-len */\n/* jshint browser:true */\n/* !\n * FitVids 1.3\n *\n *\n * Copyright 2017, Chris Coyier + Dave Rupert + Ghost Foundation\n * This is an unofficial release, ported by John O'Nolan\n * Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/\n * Released under the MIT license\n *\n */\n\n(function ($) {\n  'use strict';\n\n  $.fn.fitVids = function (options) {\n    var settings = {\n      customSelector: null,\n      ignore: null\n    };\n\n    if (!document.getElementById('fit-vids-style')) {\n      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js\n      var head = document.head || document.getElementsByTagName('head')[0];\n      var css =\n        '.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';\n      var div = document.createElement('div');\n      div.innerHTML = '<p>x</p><style id=\"fit-vids-style\">' + css + '</style>';\n      head.appendChild(div.childNodes[1]);\n    }\n\n    if (options) {\n      $.extend(settings, options);\n    }\n\n    return this.each(function () {\n      var selectors = [\n        'iframe[src*=\"player.vimeo.com\"]',\n        'iframe[src*=\"youtube.com\"]',\n        'iframe[src*=\"youtube-nocookie.com\"]',\n        'iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n        'iframe[src*=\"player.bilibili.com\"]',\n        'object',\n        'embed'\n      ];\n\n      if (settings.customSelector) {\n        selectors.push(settings.customSelector);\n      }\n\n      var ignoreList = '.fitvidsignore';\n\n      if (settings.ignore) {\n        ignoreList = ignoreList + ', ' + settings.ignore;\n      }\n\n      var $allVideos = $(this).find(selectors.join(','));\n      // SwfObj conflict patch\n      $allVideos = $allVideos.not('object object');\n      // Disable FitVids on this video.\n      $allVideos = $allVideos.not(ignoreList);\n\n      $allVideos.each(function () {\n        var $this = $(this);\n        if ($this.parents(ignoreList).length > 0) {\n          // Disable FitVids on this video.\n          return;\n        }\n        if (\n          (this.tagName.toLowerCase() === 'embed' &&\n            $this.parent('object').length) ||\n          $this.parent('.fluid-width-video-wrapper').length\n        ) {\n          return;\n        }\n        if (\n          !$this.css('height') &&\n          !$this.css('width') &&\n          (isNaN($this.attr('height')) || isNaN($this.attr('width')))\n        ) {\n          $this.attr('height', 9);\n          $this.attr('width', 16);\n        }\n        var height =\n            this.tagName.toLowerCase() === 'object' ||\n            ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10)))\n              ? parseInt($this.attr('height'), 10)\n              : $this.height(),\n          width = !isNaN(parseInt($this.attr('width'), 10))\n            ? parseInt($this.attr('width'), 10)\n            : $this.width(),\n          aspectRatio = height / width;\n        if (!$this.attr('name')) {\n          var videoName = 'fitvid' + $.fn.fitVids._count;\n          $this.attr('name', videoName);\n          $.fn.fitVids._count++;\n        }\n        $this\n          .wrap(\n            '<div class=\"fluid-width-video-container\"><div class=\"fluid-width-video-wrapper\"></div></div>'\n          )\n          .parent('.fluid-width-video-wrapper')\n          .css('padding-top', aspectRatio * 100 + '%');\n        $this.removeAttr('height').removeAttr('width');\n      });\n    });\n  };\n\n  // Internal counter for unique video names.\n  $.fn.fitVids._count = 0;\n\n  // Works with either jQuery or Zepto\n})(window.jQuery || window.Zepto);\n"],"names":["$","fn","fitVids","options","settings","customSelector","ignore","document","getElementById","head","getElementsByTagName","div","createElement","innerHTML","appendChild","childNodes","extend","this","each","selectors","push","ignoreList","$allVideos","find","join","not","$this","parents","length","tagName","toLowerCase","parent","css","isNaN","attr","aspectRatio","parseInt","height","width","videoName","_count","wrap","removeAttr","window","jQuery","Zepto"],"mappings":"CAaA,SAAWA,GACT,aAEAA,EAAEC,GAAGC,QAAU,SAAUC,GACvB,IAAIC,EAAW,CACbC,eAAgB,KAChBC,OAAQ,MAGV,IAAKC,SAASC,eAAe,kBAAmB,CAE9C,IAAIC,EAAOF,SAASE,MAAQF,SAASG,qBAAqB,QAAQ,GAG9DC,EAAMJ,SAASK,cAAc,OACjCD,EAAIE,UAAY,oUAChBJ,EAAKK,YAAYH,EAAII,WAAW,IAOlC,OAJIZ,GACFH,EAAEgB,OAAOZ,EAAUD,GAGdc,KAAKC,KAAK,WACf,IAAIC,EAAY,CACd,kCACA,6BACA,sCACA,oDACA,qCACA,SACA,SAGEf,EAASC,gBACXc,EAAUC,KAAKhB,EAASC,gBAG1B,IAAIgB,EAAa,iBAEbjB,EAASE,SACXe,EAAaA,EAAa,KAAOjB,EAASE,QAG5C,IAAIgB,EAAatB,EAAEiB,MAAMM,KAAKJ,EAAUK,KAAK,OAI7CF,GAFAA,EAAaA,EAAWG,IAAI,kBAEJA,IAAIJ,IAEjBH,KAAK,WACd,IAAIQ,EAAQ1B,EAAEiB,MACd,KAAuC,EAAnCS,EAAMC,QAAQN,GAAYO,QAKI,UAA/BX,KAAKY,QAAQC,eACZJ,EAAMK,OAAO,UAAUH,QACzBF,EAAMK,OAAO,8BAA8BH,QAH7C,CAQGF,EAAMM,IAAI,WACVN,EAAMM,IAAI,WACVC,MAAMP,EAAMQ,KAAK,aAAcD,MAAMP,EAAMQ,KAAK,YAEjDR,EAAMQ,KAAK,SAAU,GACrBR,EAAMQ,KAAK,QAAS,KAEtB,IAQEC,GAPiC,WAA/BlB,KAAKY,QAAQC,eACZJ,EAAMQ,KAAK,YAAcD,MAAMG,SAASV,EAAMQ,KAAK,UAAW,KAC3DE,SAASV,EAAMQ,KAAK,UAAW,IAC/BR,EAAMW,WACHJ,MAAMG,SAASV,EAAMQ,KAAK,SAAU,KAEzCR,EAAMY,QADNF,SAASV,EAAMQ,KAAK,SAAU,KAGpC,IAAKR,EAAMQ,KAAK,QAAS,CACvB,IAAIK,EAAY,SAAWvC,EAAEC,GAAGC,QAAQsC,OACxCd,EAAMQ,KAAK,OAAQK,GACnBvC,EAAEC,GAAGC,QAAQsC,SAEfd,EACGe,KACC,gGAEDV,OAAO,8BACPC,IAAI,cAA6B,IAAdG,EAAoB,KAC1CT,EAAMgB,WAAW,UAAUA,WAAW,eAM5C1C,EAAEC,GAAGC,QAAQsC,OAAS,EAjGxB,CAoGGG,OAAOC,QAAUD,OAAOE"}